# このディレクトリの内容について

Latexmk を使って文書を執筆するときのためのツールです．環境変数を設定して起動すれば，一気に論文執筆環境に没入できます．わたしの環境はOS XのMacTex (texlive 2013版) です．LinuxやWindowsでも少し変更すれば利用できるはずです．OS Xをご利用の場合はプレビューアとしてSkimをご利用ください．

-----
## 使用方法

本Gitリポジトリをインストールしてから，実行環境にTEXMKCONF変数に本ディレクトリを設定して下さい．

    export TEXMKCONF=$HOME/lib/tex/mk

jssst2014 のための論文を執筆する場合，執筆用のディレクトリの準備などせず，いきなり，以下を実行します．

    env PAPER=$HOME/paper/jssst2014 BUILD=platex $TEXMKCONF/mk

このスクリプトは執筆用のディレクトリを初期化し，テキストエディタを起動し，latexmkを継続ビルドモードで起動し，プレビューアを開きます．あとは編集作業をし，保存するだけで，プレビューアが自動更新されます．

- 必要な文書プロジェクトのディレクトリの作成と，サブディレクトリ(sty, img, tex)の初期化

- メインファイルの作成．デフォルトはtex/main.texですが，MAIN環境変数を指定すれば変更できます．

- もしも $PAPER/.git というディレクトリが指定したら，そこにGitリポジトリを作成

- MacVim を起動．MacVimを使っていない場合は，適宜`mk`を修正して下さい．

- latexmk を継続ビルドモードで起動：継続ビルドモードでは以下を実行します．

    - （まだ存在してなかったら）作業用ディレクトリを作成する

    - 作業用ディレクトリを消去する

    - プロジェクトをビルドし，プレビューアを起動する

    - 継続的にファイルの更新を監視し，必要に応じてPDFファイルを生成し続ける．

-----
## 必要な環境変数

PAPER
:   文書プロジェクトのディレクトリを絶対パスで指定する．必須設定．

BUILD (pdflatex|platex|uplatex)
:   いずれのビルド設定を利用するかを選択する．必須設定．

MAIN
:   メインのtexファイルへのパスを設定する．デフォルトは`tex/main.tex`

-----
## 設定ファイルの構成

`common`
:   Latexmkを利用するための共通設定．

`pdflatex`
:   pdflatexを利用するための設定．commonをちょいと拡張している．

`platex`
:   platexを利用するための設定．commonをちょいと拡張している．

`uplatex`
:   uplatexを利用するための設定．commonをちょいと拡張している．


-----
## OS X用のTips

実は，私は`mk`スクリプトを直接実行しているわけではありません．ターミナルの環境設定で論文ごとのプロファイルを作成し，そこから本スクリプトを起動しています．たとえば，ターミナルにJSSST2014というプロファイルを作成し，その起動スクリプトに以下を指定します．

    env BUILD=platex PAPER=jssst2014 $TEXMKCONF/mk

いったん，この設定をしてしまえば，ターミナルのメニューから「シェル&lt; 新規ウィンドウ...&lt; JSSST2014」を選択するだけで，一気に仕事モードに入れます．

また，別の論文の執筆がはじまったときは，JSSST2014のプロファイルを複製して，その論文用のプロファイルを作成すればいいのでさらに簡単です．

本当にせっぱつまったらプロファイルに`ifconfig en0 down`を追加して断線できますよ．
