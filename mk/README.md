# このディレクトリの内容について

Latexmk を使って文書を執筆するときのための共通設定を保存しています．

-----
## Latexmk の共通設定

`common`
:   Latexmkを利用するための共通設定．

`pdflatex`
:   pdflatexを利用するための設定．commonをちょいと拡張している．

`platex`
:   platexを利用するための設定．commonをちょいと拡張している．

`uplatex`
:   uplatexを利用するための設定．commonをちょいと拡張している．

-----
## スクリプト (`mk`)

`mk`は上述のLatexmkの設定を活用して，LaTeXプロジェクトをビルドするためのユーティリティスクリプト．これを利用するときは，以下の環境変数を設定して下さい．

BUILD (pdflatex|platex|uplatex)
:   いずれのビルド設定を利用するかを選択する．必須設定．

MAIN
:   メインのtexファイルへのパスを設定する．デフォルトは`tex/main.tex`

PAPER
:   文書のプロジェクト名を指定する．必須設定．

`mk`を起動するには二通りがあります．

## `mk`をDropboxフォルダから起動

`mk`は`$PAPER`で指定されるディレクトリが存在していなければ以下の初期化をします．

- 文書プロジェクトのディレクトリを作成

- img, sty, tex サブディレクトリを作成

- tex/main.tex を作成

- 文書ディレクトリをGitプロジェクトとして初期化

- エディタを起動

- latexmk を継続ビルドモードで起動：継続ビルドモードでは以下を実行します．

    - （まだ存在してなかったら）作業用ディレクトリを作成する

    - 作業用ディレクトリを消去する

    - プロジェクトをビルドし，プレビューアを起動する

    - 継続的にファイルの更新を監視し，必要に応じてPDFファイルを生成し続ける．

## `mk`を文書プロジェクトのディレクトリから起動

- すでに文書プロジェクトのディレクトリが構成されているものとし，前述のディレクトリの初期化は行いません．文書プロジェクトのメインファイルは`MAIN`環境変数で指定して下さい．デフォルトは`tex/main.tex`です．

- エディタを起動

- latexmk を継続ビルドモードで起動．`mk`をDropboxフォルダから起動したときと同じことをします．

-----
## Tips

私はこのリポジトリを$DROPBOX/lib/texにインストールして使っています．

`mk`スクリプトを直接実行することはなく，ターミナル.appの環境設定で論文ごとのプロファイルを作成し，そこで以下のコマンドを実行させています．

    env BUILD=pdflatex PAPER=mypaper lib/tex/mk/mk

この設定により，ターミナル.appから，このプロファイルに相当するウィンドウを開くだけで，latexmkを継続ビルドモードで起動するターミナルのほか，編集用のエディタとプレビューアが自動的に起動されるので，ワンタッチで一気に仕事モードに入れます．

本当にせっぱつまったときは，プロファイルに`ifconfig en0 down`を追加すれば，断線できます．
